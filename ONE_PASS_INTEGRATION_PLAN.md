# One-Pass Multi-Avatar ì‹œìŠ¤í…œ í†µí•© ê³„íš

## ğŸ¯ í•µì‹¬ í˜ì‹ 

### ë¬¸ì œ: ë¹„íš¨ìœ¨ì  ë¶„ì„
```
ë³´ê³ ì„œ 1ê°œ ìˆ˜ì§‘
    â†“
ì•„ë°”íƒ€ 1: LLM ë¶„ì„ (3ë¶„)
ì•„ë°”íƒ€ 2: LLM ë¶„ì„ (3ë¶„)
...
ì•„ë°”íƒ€ 100: LLM ë¶„ì„ (3ë¶„)

ì´ ì‹œê°„: 300ë¶„ (5ì‹œê°„!) âŒ
```

### í•´ê²°: One-Pass ì‹œìŠ¤í…œ
```
ë³´ê³ ì„œ 1ê°œ ìˆ˜ì§‘
    â†“
1ë²ˆì˜ ì¢…í•© ë¶„ì„ (3ë¶„) - ëª¨ë“  ì¸¡ë©´ ì¶”ì¶œ
    â†“
êµ¬ì¡°í™”ëœ ì§€ì‹ ì €ì¥ì†Œ
    â†“
ì•„ë°”íƒ€ 1-100: ì¿¼ë¦¬ë§Œ (0.01ì´ˆì”©)

ì´ ì‹œê°„: 3ë¶„ + 1ì´ˆ = 3ë¶„! âœ…
78ë°° ë¹ ë¦„! âœ…
```

## ğŸ—ï¸ í†µí•© ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              í¬ë¡¤ëŸ¬ ì‹œìŠ¤í…œ (í˜„ì¬)                       â”‚
â”‚  - 38ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ í¬ë¡¤ëŸ¬                                 â”‚
â”‚  - ë³´ê³ ì„œ ìˆ˜ì§‘                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         One-Pass Comprehensive Extractor              â”‚
â”‚         (1ë²ˆì˜ LLM í˜¸ì¶œë¡œ ëª¨ë“  ì •ë³´ ì¶”ì¶œ)              â”‚
â”‚                                                          â”‚
â”‚  ğŸ“Š ì¬ë¬´ ì§€í‘œ                                            â”‚
â”‚  ğŸ“ˆ ë§¤ë§¤ ì‹ í˜¸                                            â”‚
â”‚  âš ï¸  ë¦¬ìŠ¤í¬ ìš”ì†Œ                                        â”‚
â”‚  ğŸ’­ ì‹œì¥ ì‹¬ë¦¬                                            â”‚
â”‚  ğŸ¯ ëª©í‘œê°€                                               â”‚
â”‚  ğŸ“… ì‹œê°„ ì •ë³´                                            â”‚
â”‚  ğŸ”— ì—°ê´€ ê¸°ì—…                                            â”‚
â”‚  ğŸ“° í•µì‹¬ ì´ë²¤íŠ¸                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Multi-Dimensional Knowledge Store              â”‚
â”‚         (êµ¬ì¡°í™”ëœ ì§€ì‹ ì €ì¥ì†Œ)                          â”‚
â”‚                                                          â”‚
â”‚  - SQLite ë°ì´í„°ë² ì´ìŠ¤                                  â”‚
â”‚  - ì¸ë±ìŠ¤ (ì¢…ëª©, ë‚ ì§œ, ì• ë„ë¦¬ìŠ¤íŠ¸)                      â”‚
â”‚  - ë¹ ë¥¸ ì¿¼ë¦¬ ì§€ì›                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            â”‚            â”‚
    â–¼            â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  ...  (Nê°œ)
â”‚ì•„ë°”íƒ€1 â”‚  â”‚ì•„ë°”íƒ€2 â”‚  â”‚ì•„ë°”íƒ€3 â”‚
â”‚ë§¤ë§¤ì „ë¬¸â”‚  â”‚ë¦¬ìŠ¤í¬  â”‚  â”‚ì¬ë¬´ë¶„ì„â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“            â†“            â†“
  0.01ì´ˆ       0.01ì´ˆ       0.01ì´ˆ
  (ì¿¼ë¦¬ë§Œ)     (ì¿¼ë¦¬ë§Œ)     (ì¿¼ë¦¬ë§Œ)
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ (í†µí•©)                        â”‚
â”‚  - ë³´ê³ ì„œ ë¶„ì„ ìƒíƒœ                                      â”‚
â”‚  - ì•„ë°”íƒ€ ë¶„ì„ ê²°ê³¼                                      â”‚
â”‚  - ì§€ì‹ ì €ì¥ì†Œ í†µê³„                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ í†µí•© ë‹¨ê³„

### Phase 1: ê¸°ë³¸ í†µí•© (1ì£¼)

#### 1.1 ë³´ê³ ì„œ ì§€ì‹ ì‹œìŠ¤í…œ í†µí•©
```python
# report_knowledge_system.py í†µí•©
- KnowledgeStore í´ë˜ìŠ¤
- ReportKnowledge ë°ì´í„° í´ë˜ìŠ¤
- ComprehensiveExtractor (LLM ì—°ë™ ì¤€ë¹„)
```

#### 1.2 í¬ë¡¤ëŸ¬ ì—°ë™
```python
# crawler_38com.py ìˆ˜ì •
- ìˆ˜ì§‘ëœ ë³´ê³ ì„œë¥¼ KnowledgeStoreì— ì €ì¥
- ë³´ê³ ì„œ ë‚´ìš© ì¶”ì¶œ ë° ì €ì¥
```

#### 1.3 ê¸°ë³¸ ì•„ë°”íƒ€ êµ¬í˜„
```python
# ê¸°ë³¸ ì•„ë°”íƒ€ 3ê°œ
- TradingAvatar (ë§¤ë§¤ ì‹ í˜¸ ë¶„ì„)
- RiskAvatar (ë¦¬ìŠ¤í¬ ë¶„ì„)
- FinancialAvatar (ì¬ë¬´ ë¶„ì„)
```

### Phase 2: LLM í†µí•© (1-2ì£¼)

#### 2.1 LLM í”„ë¡œì„¸ì„œ ì„ íƒ
```python
# ì˜µì…˜ 1: OpenAI API
# ì˜µì…˜ 2: Claude API
# ì˜µì…˜ 3: ë¡œì»¬ LLM (Ollama)
# ì˜µì…˜ 4: Mock (í…ŒìŠ¤íŠ¸ìš©)
```

#### 2.2 ComprehensiveExtractor êµ¬í˜„
```python
# comprehensive_extractor.py
- LLM í”„ë¡¬í”„íŠ¸ ìƒì„±
- JSON íŒŒì‹±
- ê²€ì¦ ë° í›„ì²˜ë¦¬
```

#### 2.3 í†µí•© í…ŒìŠ¤íŠ¸
```python
# ì‹¤ì œ ë³´ê³ ì„œë¡œ í…ŒìŠ¤íŠ¸
- ì¶”ì¶œ ì •í™•ë„ í™•ì¸
- ì„±ëŠ¥ ì¸¡ì •
- ì˜¤ë¥˜ ì²˜ë¦¬
```

### Phase 3: ì•„ë°”íƒ€ í™•ì¥ (1ì£¼)

#### 3.1 ì „ë¬¸ ì•„ë°”íƒ€ ì¶”ê°€
```python
# ì¶”ê°€ ì•„ë°”íƒ€
- SentimentAvatar (ì‹œì¥ ì‹¬ë¦¬)
- EventAvatar (ì´ë²¤íŠ¸ ë¶„ì„)
- SectorAvatar (ì„¹í„° ë¶„ì„)
- ValuationAvatar (ë°¸ë¥˜ì—ì´ì…˜)
```

#### 3.2 ì•„ë°”íƒ€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
```python
# orchestrator.py
- ì•„ë°”íƒ€ ë“±ë¡ ë° ê´€ë¦¬
- ë³‘ë ¬ ë¶„ì„ ì‹¤í–‰
- ê²°ê³¼ ì§‘ê³„
```

### Phase 4: ëŒ€ì‹œë³´ë“œ í†µí•© (1ì£¼)

#### 4.1 ë¶„ì„ ê²°ê³¼ ìœ„ì ¯
```python
# analysis_results_widget.py
- ë³´ê³ ì„œ ë¶„ì„ ìƒíƒœ
- ì•„ë°”íƒ€ë³„ ë¶„ì„ ê²°ê³¼
- ì§€ì‹ ì €ì¥ì†Œ í†µê³„
```

#### 4.2 ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
```python
# ë³´ê³ ì„œ ë¶„ì„ ì™„ë£Œ ì‹œ
- ëŒ€ì‹œë³´ë“œ ìë™ ì—…ë°ì´íŠ¸
- ì•Œë¦¼ í‘œì‹œ
- ê²°ê³¼ ì‹œê°í™”
```

## ğŸ“‹ êµ¬í˜„ ê³„íš

### Step 1: íŒŒì¼ êµ¬ì¡°
```
crawler_01/
â”œâ”€â”€ crawler_38com.py          # ê¸°ì¡´ í¬ë¡¤ëŸ¬
â”œâ”€â”€ report_knowledge_system.py # One-Pass ì‹œìŠ¤í…œ
â”œâ”€â”€ comprehensive_extractor.py # ì¢…í•© ì¶”ì¶œê¸°
â”œâ”€â”€ avatar_analysis.py        # ì•„ë°”íƒ€ ë¶„ì„
â”œâ”€â”€ orchestrator.py           # ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â””â”€â”€ crawler_monitoring_widget.py # ëŒ€ì‹œë³´ë“œ (í™•ì¥)
```

### Step 2: ì˜ì¡´ì„± ì¶”ê°€
```python
# requirements.txt
requests>=2.31.0
beautifulsoup4>=4.12.0
lxml>=4.9.0
PyQt5>=5.15.0
# LLM ì„ íƒ (í•˜ë‚˜ë§Œ)
openai>=1.0.0  # ë˜ëŠ”
anthropic>=0.7.0  # ë˜ëŠ”
ollama>=0.1.0  # ë˜ëŠ”
# ë°ì´í„°ë² ì´ìŠ¤
sqlalchemy>=2.0.0
```

### Step 3: í†µí•© ì½”ë“œ ì‘ì„±
```python
# integrated_crawler_system.py
class IntegratedCrawlerSystem:
    def __init__(self):
        # í¬ë¡¤ëŸ¬
        self.crawler = ThirtyEightComCrawler()
        
        # One-Pass ì‹œìŠ¤í…œ
        self.orchestrator = ReportAnalysisOrchestrator(llm)
        
        # ì§€ì‹ ì €ì¥ì†Œ
        self.knowledge_store = KnowledgeStore()
        
        # ëª¨ë‹ˆí„°ë§
        self.dashboard = CrawlerDashboardWidget()
    
    def crawl_and_analyze(self, days=1, max_reports=20):
        """í¬ë¡¤ë§ ë° ë¶„ì„"""
        
        # 1. í¬ë¡¤ë§
        reports = self.crawler.crawl_recent_reports(days, max_reports)
        
        # 2. ê° ë³´ê³ ì„œ ë¶„ì„
        for report in reports:
            # One-Pass ë¶„ì„
            result = self.orchestrator.process_report(
                report_id=report.report_id,
                report_content=report.content
            )
            
            # ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
            self.dashboard.update_analysis_result(result)
```

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ êµ¬í˜„

### ğŸ”¥ ìµœìš°ì„  (1ì£¼)
1. **report_knowledge_system.py í†µí•©**
   - KnowledgeStore í´ë˜ìŠ¤
   - ReportKnowledge ë°ì´í„° í´ë˜ìŠ¤
   - ê¸°ë³¸ ì¿¼ë¦¬ ê¸°ëŠ¥

2. **í¬ë¡¤ëŸ¬ ì—°ë™**
   - ìˆ˜ì§‘ëœ ë³´ê³ ì„œ ì €ì¥
   - ë³´ê³ ì„œ ë‚´ìš© ì¶”ì¶œ

3. **ê¸°ë³¸ ì•„ë°”íƒ€ 3ê°œ**
   - TradingAvatar
   - RiskAvatar
   - FinancialAvatar

### âš¡ ë†’ì€ ìš°ì„ ìˆœìœ„ (2ì£¼)
4. **LLM í†µí•©**
   - ComprehensiveExtractor êµ¬í˜„
   - Mock LLMìœ¼ë¡œ í…ŒìŠ¤íŠ¸
   - ì‹¤ì œ LLM ì—°ë™ (ì„ íƒ)

5. **ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°**
   - ReportAnalysisOrchestrator
   - ì•„ë°”íƒ€ ë“±ë¡ ë° ê´€ë¦¬
   - ë³‘ë ¬ ë¶„ì„

### ğŸ“ˆ ì¤‘ê°„ ìš°ì„ ìˆœìœ„ (3ì£¼)
6. **ëŒ€ì‹œë³´ë“œ í†µí•©**
   - ë¶„ì„ ê²°ê³¼ ìœ„ì ¯
   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
   - ì‹œê°í™”

7. **ì•„ë°”íƒ€ í™•ì¥**
   - ì¶”ê°€ ì „ë¬¸ ì•„ë°”íƒ€
   - ì•„ë°”íƒ€ ê´€ë¦¬ UI

## ğŸ’¡ í˜ì‹  íš¨ê³¼

### ì„±ëŠ¥ ê°œì„ 
```
ë‹¨ì¼ ë³´ê³ ì„œ + 100 ì•„ë°”íƒ€:
  ê¸°ì¡´: 320ì´ˆ (5ë¶„ 20ì´ˆ)
  í˜ì‹ : 4.1ì´ˆ
  â†’ 78ë°° ê°œì„  âœ…

1,000 ë³´ê³ ì„œ + 100 ì•„ë°”íƒ€:
  ê¸°ì¡´: 88ì‹œê°„
  í˜ì‹ : 1.1ì‹œê°„
  â†’ 80ë°° ê°œì„  âœ…
```

### ë¹„ìš© ì ˆê°
```
API ì‚¬ìš© ì‹œ:
  ê¸°ì¡´: $12,000/ë…„
  í˜ì‹ : $180/ë…„
  â†’ 67ë°° ì ˆê° âœ…
```

### í™•ì¥ì„±
```
ìƒˆ ì•„ë°”íƒ€ ì¶”ê°€ (1,000 ë³´ê³ ì„œ):
  ê¸°ì¡´: 50ì‹œê°„ ì¬ë¶„ì„
  í˜ì‹ : 5ì´ˆ ì¿¼ë¦¬
  â†’ 36,000ë°° ê°œì„  âœ…
```

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

1. **report_knowledge_system.py í†µí•©**
   - íŒŒì¼ ë³µì‚¬ ë° ìˆ˜ì •
   - í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ë§ê²Œ ì¡°ì •

2. **í¬ë¡¤ëŸ¬ ì—°ë™**
   - ë³´ê³ ì„œ ìˆ˜ì§‘ í›„ ìë™ ë¶„ì„
   - ì§€ì‹ ì €ì¥ì†Œì— ì €ì¥

3. **ê¸°ë³¸ ì•„ë°”íƒ€ êµ¬í˜„**
   - 3ê°œ ê¸°ë³¸ ì•„ë°”íƒ€
   - í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

4. **ëŒ€ì‹œë³´ë“œ í™•ì¥**
   - ë¶„ì„ ê²°ê³¼ í‘œì‹œ
   - ì•„ë°”íƒ€ ìƒíƒœ ëª¨ë‹ˆí„°ë§



